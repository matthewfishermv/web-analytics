mutate(Registrar = reorder(Registrar, Share)) %>%
ggplot(aes(x = Registrar, y = Share, fill = Share)) +
geom_bar(stat = "identity") +
coord_flip() +
scale_fill_gradient2(mid = "#219c33", high = "#28ed45") +
scale_y_continuous(breaks = seq(0, 20, 2)) +
labs(title = "Market Share by Domain Registrar",
subtitle = "Data: domainnamestat.com\n",
caption = "NetworkCalc 2021-12-28") +
xlab("Registrar\n") + ylab("\nShare (%)") +
geom_dl(aes(label = paste0(Share, "%")), method = list("last.points", cex = 1.7, dl.trans(x = x + 0.5)), color = "#25d93f") +
theme (
title = element_text(size = 16, color = "#0066cc"),
plot.subtitle = element_text(color = "#787879"),
plot.caption = element_text(color = "darkgray"),
axis.title = element_text(size = 14),
axis.text = element_text(size = 11, color = "#0052a3"),
panel.background = element_rect(color = "#0066cc", fill = "#f5f5f6", size = 2),
legend.position = "none"
) +
expand_limits(y = c(0, 15))
data %>%
mutate(Registrar = reorder(Registrar, Share)) %>%
ggplot(aes(x = Registrar, y = Share, fill = Share)) +
geom_bar(stat = "identity") +
coord_flip() +
scale_fill_gradient2(low = "white" mid = "#219c33", high = "#28ed45") +
scale_y_continuous(breaks = seq(0, 20, 2)) +
labs(title = "Market Share by Domain Registrar",
subtitle = "Data: domainnamestat.com\n",
caption = "NetworkCalc 2021-12-28") +
xlab("Registrar\n") + ylab("\nShare (%)") +
geom_dl(aes(label = paste0(Share, "%")), method = list("last.points", cex = 1.7, dl.trans(x = x + 0.5)), color = "#25d93f") +
theme (
title = element_text(size = 16, color = "#0066cc"),
plot.subtitle = element_text(color = "#787879"),
plot.caption = element_text(color = "darkgray"),
axis.title = element_text(size = 14),
axis.text = element_text(size = 11, color = "#0052a3"),
panel.background = element_rect(color = "#0066cc", fill = "#f5f5f6", size = 2),
legend.position = "none"
) +
expand_limits(y = c(0, 15))
data %>%
mutate(Registrar = reorder(Registrar, Share)) %>%
ggplot(aes(x = Registrar, y = Share, fill = Share)) +
geom_bar(stat = "identity") +
coord_flip() +
scale_fill_gradient2(low = "white", mid = "#219c33", high = "#28ed45") +
scale_y_continuous(breaks = seq(0, 20, 2)) +
labs(title = "Market Share by Domain Registrar",
subtitle = "Data: domainnamestat.com\n",
caption = "NetworkCalc 2021-12-28") +
xlab("Registrar\n") + ylab("\nShare (%)") +
geom_dl(aes(label = paste0(Share, "%")), method = list("last.points", cex = 1.7, dl.trans(x = x + 0.5)), color = "#25d93f") +
theme (
title = element_text(size = 16, color = "#0066cc"),
plot.subtitle = element_text(color = "#787879"),
plot.caption = element_text(color = "darkgray"),
axis.title = element_text(size = 14),
axis.text = element_text(size = 11, color = "#0052a3"),
panel.background = element_rect(color = "#0066cc", fill = "#f5f5f6", size = 2),
legend.position = "none"
) +
expand_limits(y = c(0, 15))
data %>%
mutate(Registrar = reorder(Registrar, Share)) %>%
ggplot(aes(x = Registrar, y = Share, fill = Share)) +
geom_bar(stat = "identity") +
coord_flip() +
scale_fill_gradient2(lo = "white", mid = "#219c33", high = "#28ed45") +
scale_y_continuous(breaks = seq(0, 20, 2)) +
labs(title = "Market Share by Domain Registrar",
subtitle = "Data: domainnamestat.com\n",
caption = "NetworkCalc 2021-12-28") +
xlab("Registrar\n") + ylab("\nShare (%)") +
geom_dl(aes(label = paste0(Share, "%")), method = list("last.points", cex = 1.7, dl.trans(x = x + 0.5)), color = "#25d93f") +
theme (
title = element_text(size = 16, color = "#0066cc"),
plot.subtitle = element_text(color = "#787879"),
plot.caption = element_text(color = "darkgray"),
axis.title = element_text(size = 14),
axis.text = element_text(size = 11, color = "#0052a3"),
panel.background = element_rect(color = "#0066cc", fill = "#f5f5f6", size = 2),
legend.position = "none"
) +
expand_limits(y = c(0, 15))
data %>%
mutate(Registrar = reorder(Registrar, Share)) %>%
ggplot(aes(x = Registrar, y = Share, fill = Share)) +
geom_bar(stat = "identity") +
coord_flip() +
scale_fill_gradient2(mid = "#219c33", high = "#28ed45") +
scale_y_continuous(breaks = seq(0, 20, 2)) +
labs(title = "Market Share by Domain Registrar",
subtitle = "Data: domainnamestat.com\n",
caption = "NetworkCalc 2021-12-28") +
xlab("Registrar\n") + ylab("\nShare (%)") +
geom_dl(aes(label = paste0(Share, "%")), method = list("last.points", cex = 1.7, dl.trans(x = x + 0.5)), color = "#25d93f") +
theme (
title = element_text(size = 16, color = "#0066cc"),
plot.subtitle = element_text(color = "#787879"),
plot.caption = element_text(color = "darkgray"),
axis.title = element_text(size = 14),
axis.text = element_text(size = 11, color = "#0052a3"),
panel.background = element_rect(color = "#0066cc", fill = "#f5f5f6", size = 2),
legend.position = "none"
) +
expand_limits(y = c(0, 15))
data %>%
mutate(Registrar = reorder(Registrar, Share)) %>%
ggplot(aes(x = Registrar, y = Share, fill = Share)) +
geom_bar(stat = "identity") +
coord_flip() +
scale_fill_gradient2(mid = "#219c33", high = "#28ed45") +
scale_y_continuous(breaks = seq(0, 20, 2)) +
labs(title = "Market Share by Domain Registrar",
subtitle = "Data: domainnamestat.com\n",
caption = "NetworkCalc 2021-12-28") +
xlab("Registrar\n") + ylab("\nShare (%)") +
geom_dl(aes(label = paste0(Share, "%")), method = list("last.points", cex = 1.7, dl.trans(x = x + 0.5)), color = "#0052a3") +
theme (
title = element_text(size = 16, color = "#0066cc"),
plot.subtitle = element_text(color = "#787879"),
plot.caption = element_text(color = "darkgray"),
axis.title = element_text(size = 14),
axis.text = element_text(size = 11, color = "#0052a3"),
panel.background = element_rect(color = "#0066cc", fill = "#f5f5f6", size = 2),
legend.position = "none"
) +
expand_limits(y = c(0, 15))
source('~/.active-rstudio-document', echo=TRUE)
packages <- c(
"gargle",
"googleAnalyticsR",
"flexdashboard",
"reactable"
)
install.packages(packages)
setwd("D:/Projects/GoogleAnalytics")
library(packages)
apply(packages, FUN = function(p) {
library(p)
})
tapply(packages, FUN = function(p) {
library(p)
})
sapply(packages, FUN = function(p) {
library(p)
})
for (p in packages) {
if (!require(p, character.only = TRUE)) {
install.packages(p)
library(p, character.only = TRUE)
}
}
googleAuthR::gar_set_client(json = "secrets/airy-ripple-344600-f828fd6663de.json")
googleAuthR::gar_set_client(json = "secrets/client_secret_747712537385-8gbvolddteireggvflmbti9maqf35rnr.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com", json_file = "secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
accounts <- ga_account_list()
googleAuthR::gar_set_client(json = "secrets/client_secret_747712537385-8gbvolddteireggvflmbti9maqf35rnr.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com", json_file = "secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
accounts <- ga_account_list()
googleAuthR::gar_set_client(json = "secrets/client_secret_747712537385-8gbvolddteireggvflmbti9maqf35rnr.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com", json_file = "secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
googleAuthR::gar_set_client(json = "secrets/client_secret_747712537385-8gbvolddteireggvflmbti9maqf35rnr.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com", json_file = "secrets/airy-ripple-344600-f828fd6663de.json")
packages <- c("gargle",
"googleAnalyticsR",
"flexdashboard",
"reactable")
for (p in packages) {
if (!require(p, character.only = TRUE)) {
install.packages(p)
library(p, character.only = TRUE)
}
}
googleAuthR::gar_set_client(json = "secrets/client_secret_747712537385-8gbvolddteireggvflmbti9maqf35rnr.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com", json_file = "secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
accounts <- ga_account_list()
googleAuthR::gar_set_client(json = "secrets/client_secret_747712537385-8gbvolddteireggvflmbti9maqf35rnr.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com", json_file = "secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
googleAuthR::gar_set_client(json = ".secrets/client_secret_306994286184-usjggu1j6n5v60d4bbt7iv9aao8323ju.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com",
json_file = ".secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
accounts <- ga_account_list()
googleAuthR::gar_set_client(json = ".secrets/client_secret_306994286184-usjggu1j6n5v60d4bbt7iv9aao8323ju.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com",
json_file = ".secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
googleAuthR::gar_set_client(json = ".secrets/client_secret_306994286184-usjggu1j6n5v60d4bbt7iv9aao8323ju.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com",
json_file = ".secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
googleAuthR::gar_set_client(json = ".secrets/client_secret_306994286184-usjggu1j6n5v60d4bbt7iv9aao8323ju.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com",
json_file = ".secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
ga-analysis@airy-ripple-344600.iam.gserviceaccount.com
googleAuthR::gar_set_client(json = ".secrets/client_secret_306994286184-usjggu1j6n5v60d4bbt7iv9aao8323ju.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com",
json_file = ".secrets/airy-ripple-344600-f828fd6663de.json")
accounts <- ga_account_list()
accounts
View(accounts)
accounts
most_viewed_posts <- data_fetch %>%
mutate(Path = str_trunc(landingPagePath, width=40)) %>%
count(Path, wt=pageviews, sort=TRUE)
packages <- c("googleAnalyticsR",
"dplyr")
for (p in packages) {
if (!require(p, character.only = TRUE)) {
install.packages(p)
library(p, character.only = TRUE)
}
}
googleAuthR::gar_set_client(json = ".secrets/client_secret_306994286184-usjggu1j6n5v60d4bbt7iv9aao8323ju.apps.googleusercontent.com.json")
ga_auth(email = "ga-analysis@airy-ripple-344600.iam.gserviceaccount.com",
json_file = ".secrets/airy-ripple-344600-f828fd6663de.json")
most_viewed_posts <- data_fetch %>%
mutate(Path = str_trunc(landingPagePath, width = 40)) %>%
count(Path, wt = pageviews, sort = TRUE)
all_users <- segment_ga4("AllTraffic", segment_id = "gaid::-1")
all_users
all_users %>% View
my_accounts <- ga_account_list()
my_accounts
my_accounts
my_accounts <- ga_account_list()
my_accounts
# Select the account.
accounts <- ga_account_list()
account <- accounts$viewId
account
# Look at a single day.
ga_start_date <- today(0)
# Look at a single day.
ga_start_date <- today()
packages <- c("googleAnalyticsR",
"dplyr",
"lubridate")
# Look at a single day.
ga_start_date <- today()
packages <- c("googleAnalyticsR",
"dplyr",
"lubridate")
for (p in packages) {
if (!require(p, character.only = TRUE)) {
install.packages(p)
library(p, character.only = TRUE)
}
}
# Look at a single day.
ga_start_date <- today()
ga_end_date <- today()
today()
data <- google_analytics(account,
segments = segment_ga4("AllTraffic"))
data <- google_analytics(account,
segments = segment_ga4("AllTraffic").
date_range = c(ga_start_date, ga_end_date))
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic"),
date_range = c(ga_start_date, ga_end_date)
)
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("oageviews")
)
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("oageviews")
)
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews")
)
data
?google_analytics
?google_analytics
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("medium")
)
data
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source")
)
data
# Look at a single day.
ga_start_date <- today() - years(1)
ga_end_date <- today()
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source")
)
data
View(data)
packages <- c("googleAnalyticsR",
"dplyr",
"lubridate",
"ggplot2")
for (p in packages) {
if (!require(p, character.only = TRUE)) {
install.packages(p)
library(p, character.only = TRUE)
}
}
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source")
) %>%
ggplot()
google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source")
) %>%
ggplot()
ggplot(data)
data %>% ggplot()
data %>% ggplot(aes(x = pageviews))
data
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source")
)
data %>% ggplot(aes(x = pageviews))
data
data %>% ggplot(aes(x = source, y = pageviews))
data %>% ggplot(aes(x = source, y = pageviews)) + geom_bar()
data %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity")
data %>%
mutate(medium = order(medium, pageviews))
data %>%
mutate(source = order(source, pageviews))
data %>%
mutate(source = order(source, pageviews, decreasing = TRUE))
data %>%
arrange(pageviews, by_group = source)
data %>%
desc(arrange(pageviews, by_group = source))
data %>%
arrange(desc(pageviews), by_group = source)
data %>%
slice_max(order_by = source)
data %>%
slice_max(order_by = source, n = 10)
data %>%
slice_max(order_by = source, n = 10) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity")
data %>%
slice_max(order_by = source, n = 10)
data %>%
slice_max(order_by = source, n = 10) %>%
arrange(by_group = pageviews) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity")
data %>%
slice_max(order_by = source, n = 10) %>%
arrange(by_group = pageviews)
data %>%
slice_max(order_by = source, n = 10) %>%
arrange(by_group = pageviews) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity")
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, pageviews)) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity")
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, pageviews))
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, desc(pageviews))) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity")
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, desc(pageviews))) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity") +
coord_flip()
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, pageviews)) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity") +
coord_flip()
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, pageviews)) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity") +
coord_flip() +
labs(
title = "Top 10 Sources"
)
data %>%
slice_max(order_by = source, n = 20) %>%
mutate(source = reorder(source, pageviews)) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity") +
coord_flip() +
labs(
title = "Top 10 Sources"
)
View(data)
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source", "referralPath")
)
View(data)
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source", "referralPath", "keyword")
)
View(data)
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source", "referralPath", "signedInWithUserId")
)
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source", "referralPath", "audienceId")
)
data <- google_analytics(
account,
segments = segment_ga4("AllTraffic", segment_id = "gaid::-1"),
date_range = c(ga_start_date, ga_end_date),
metrics = c("pageviews"),
dimensions = c("source", "referralPath", "browser")
)
View(data)
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, pageviews)) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity") +
coord_flip() +
labs(
title = "Top 10 Sources"
)
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, pageviews)) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity") +
coord_flip() +
labs(
title = "Top 10 Sources"
) +
facet_wrap(~ browser)
data %>%
slice_max(order_by = source, n = 10) %>%
mutate(source = reorder(source, pageviews)) %>%
ggplot(aes(x = source, y = pageviews)) +
geom_bar(stat = "identity") +
coord_flip() +
labs(
title = "Top 10 Sources"
) +
facet_wrap(~ browser, scales = "free")
